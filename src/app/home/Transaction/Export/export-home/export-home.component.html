<div class="col-12 p-0">
  <div class="container-fluid p-0">
    <div class="import_export_sec">
      <div class="row">
        <div class="col-md-6 col-sm-6 col-xs-12">
          <div class="Dashbord_sec">
            <h2 class="title_dash">Purpose code</h2>
          </div>
        </div>
        <div class="col-md-6 col-sm-6 col-xs-12">
          <div class="float_right_page">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a routerLink="/home/pipo">Transactions</a></li>
                <li class="breadcrumb-item active" aria-current="page">Inward remittance settlement or disposal</li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </div>
    <div class="content_white_background">
      <main id="content" class="content22 table-padding" role="main">
        <div cla ss="analytics" *ngIf="proceed">
          <div *ngIf="!selectPurpose">
            <p class="stp3">Search by Group Name and Purpose code*</p>
            <div *ngIf="!purposeSelect" class="top_serah_section">
              <div style="gap: 10px;
              display: grid !important;
              grid-template-columns: repeat(2,1fr);">
                <ng-select class="col-12" *ngIf="this.GROUP_NAME_LIST?.length!=0" [items]="this.GROUP_NAME_LIST"
                  class="mb-4" style="margin-bottom: 20px;" placeholder="Search group name" bindLabel="value"
                  (keyup)="searchDataGroupName($event.target.value);" (change)="this.searchDataGroupName($event?.value)"
                  [mulitple]="true" #ngSelect> </ng-select>

                <ng-select class="col-12" [items]="Inward_Remittancefilter" class="mb-4" style="margin-bottom: 20px;"
                  placeholder="Search purpose code" (keyup)="searchData($event.target.value);"
                  (change)="this.searchData(selection)" [mulitple]="true" [(ngModel)]="selection" name="commodity"
                  #ngSelect> </ng-select>
              </div>
              <div *ngIf="pgNumber != 0"> Matching Result
                <br> Number of Purpose Group = {{ pgNumber }}
                <br> Number of Purpose Code or Description = {{ pcNumber }}
              </div>
              <div *ngIf="selectedPurpose.length>0">
                <div class='tag_list_left' style="margin-top: 15px;"
                  *ngFor="let code of selectedPurpose; let i = index"> <span class="tag_list">{{code}}<b
                      (click)="removeClick(i)" style="color: red;    cursor: pointer;padding: 0 0 0 8px;"><i
                        class="fa fa-times" aria-hidden="true"></i></b></span> </div>
                <br />
              </div>
              <div class="col-12 table-custom">
                <div class="thead-card">
                  <label for="" class="label-text">Purpose Group Name</label>
                  <div class="colspan">
                    <label for="" class="label-text">Purpose Code</label>
                    <label for="" class="label-text">Description</label>
                  </div>
                </div>
                <div class="tbody-card" *ngFor="let item of this.NEW_PURPOSE_CODE;let j=index">
                  <p class="p-border groupname-text">{{item?.groupname}}</p>
                  <div class="colspanitem">
                    <div class="colspan card-layout" [ngClass]="{'isActive':colspanitem.isActive==true}"
                      *ngFor="let colspanitem of item?.purpose;let k=index"
                      (click)="purposeClick(colspanitem?.code,colspanitem);">
                      <p class="p-text">{{colspanitem?.code}}</p>
                      <p class="text-left">{{colspanitem?.description}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="analytics" *ngIf="!proceed">
          <div class="flex-container">
            <div *ngFor="let code of selectedPurpose; let i = index" [ngClass]="{'my_class': c === code}"
              (click)="tabClick(code,i)"> {{code}}</div>
          </div>
          <div class="border_bottt"></div>
          <div *ngIf='c'>
            <div *ngIf='c == "P0102" || c == "P0104" || c == "P0105" || c == "P0107"' class="table_list_newss">
              <div *ngFor="let code of selectedPurpose; let j = index">
                <div
                  *ngIf='code === c && sbPurpose[j] != code && importPurpose[j] != code && noImportPurpose[j] != code && mailArray[j] != code'>
                  <div class="form-group">
                    <div class="row">
                      <div class="col-lg-4 col-md-4 col-sm-8 col-8">
                        <h3>Is Lodgement already done?</h3>
                      </div>
                      <div class="col-lg-2 col-md-2 col-sm-4 col-4">
                        <div class="toggle-button">
                          <button
                            [class]="ClassRetrun('Lodgement','Hide','btn no-button active1','btn btn-primary remove-no-button','no')"
                            type="button" (click)="Changebutton('Lodgement','Hide','Show','no')"> <span
                              class="icon_top"></span>No</button>
                          <button
                            [class]="ClassRetrun('Lodgement','Show','btn yes-button active','btn yes-button','yes')"
                            type="button" (click)="Changebutton('Lodgement','Show','Hide','yes')"> <span
                              class="icon_top"></span>Yes </button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div *ngIf='this.Lodgement[selection]["Lodgement"]["Show"]==="yes"'>
                    <div class="row">
                      <div class="col-lg-6 col-md-6 col-sm-6 col-12">
                        <h3> bank reference number</h3><br>
                        <input #bnk_reff [value]="this.ArrayToString(SELECT_bankreferencenumber)" id="bnk_reff"
                          class="bnk_reff form-control PopupOpen" type="text" popup-close="BillLodgementNumber"
                          autocomplete="off" (keyup)="change($event)"
                          (click)="loadPopup(searchbankname,custommodal.style.display='flex');"
                          (change)="change($event)">
                      </div>
                    </div>
                    <div class="space_div"></div>
                    <div class="form-group">
                      <div class="row">
                        <div class="col-lg-4 col-md-4 col-sm-8 col-8">
                          <h3>Is Buyer remitter different?</h3>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-4 col-4">
                          <div class="toggle-button">
                            <button
                              [class]="ClassRetrun('BuyerRemitterDifferent','Hide','btn no-button active1','btn btn-primary remove-no-button','no')"
                              type="button" (click)="Changebutton('BuyerRemitterDifferent','Hide','Show','no')"> <span
                                class="icon_top"></span>No</button>
                            <button
                              [class]="ClassRetrun('BuyerRemitterDifferent','Show','btn yes-button active','btn yes-button','yes')"
                              type="button" (click)="Changebutton('BuyerRemitterDifferent','Show','Hide','yes')">
                              <span class="icon_top"></span>Yes </button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="this.Lodgement[selection]['BuyerRemitterDifferent']['Show']== 'yes'"
                      class="Tripartite-agreement">
                      <h3 style="margin-left: 4px;">Select Tripartite agreement </h3>
                      <div class="form-check-new list_top_tobtm">
                        <div *ngIf="this.ThirdPartydata.length!=0">
                          <div class="col-md-12">
                            <div class="row">
                              <div class="col-md-5 col-sm-6 col-6 pl-0">
                                <div class="select_rol">
                                  <ng-select [items]="this.ThirdPartydata" bindLabel="buyerName"
                                    placeholder="Select Tripartite agreement" [(ngModel)]="ThirdPartydataselection"
                                    name="commodity" #ngSelect>
                                  </ng-select>
                                </div>
                              </div>
                              <div class="col-md-1 col-sm-2 col-3 pl-0 collepse-btn-input">
                                <div class="uplod_doc">
                                  <button type="button" class="btn btn-danger">
                                    <img src="../../../assets/Icon-feather-upload.svg" alt="">
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="space_bottom"></div>
                        </div>
                        <div class="space_bottom"></div>
                      </div>
                      <div class="form-group mt-4">
                        <div class="row">
                          <div class="col-lg-4 col-md-4 col-sm-8 col-8">
                            <h3>Is Invoice reduction?</h3>
                          </div>
                          <div class="col-lg-2 col-md-2 col-sm-4 col-4">
                            <div class="toggle-button">
                              <button
                                [class]="ClassRetrun('InvoiceReduction2','Hide','btn no-button active1','btn btn-primary remove-no-button','no')"
                                type="button" (click)="Changebutton('InvoiceReduction2','Hide','Show','no')"> <span
                                  class="icon_top"></span>No</button>
                              <button
                                [class]="ClassRetrun('InvoiceReduction2','Show','btn yes-button active','btn yes-button','yes')"
                                type="button" (click)="Changebutton('InvoiceReduction2','Show','Hide','yes')"> <span
                                  class="icon_top"></span>Yes </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div *ngIf="this.Lodgement[selection]['InvoiceReduction2']['Show']== 'yes'">
                        <button class="opt right_buttons_new" style="
                                                                                      width: 200px;"
                          (click)='generateDoc2(this.Lodgement[selection]["InvoiceReduction2"]["Show"],code,j)'>
                          Generate Invoice Reduction </button>
                      </div>
                      <div *ngIf="this.Lodgement[selection]['InvoiceReduction2']['Hide']== 'no'">
                        <button class="button1" style="margin-right: 10px; width:200px"
                          [disabled]="this.GetDownloadStatus?.status=='pending' || this.GetDownloadStatus?.status=='verify'"
                          (click)="SendApproval(this.GetDownloadStatus?.status,this.Inward_Remittance_MT103[this.Inward_Remittance_MT103.length-1]?._id,code)">Send
                          for Approval</button>
                      </div>
                    </div>
                    <div *ngIf="this.Lodgement[selection]['BuyerRemitterDifferent']['Hide']== 'no'">
                      <div *ngIf="this.GetDownloadStatus?.status!='Approved'">
                        <div *ngIf="this.GetDownloadStatus?.status==null || this.GetDownloadStatus?.status=='Rejected'">
                          <button class="button1" style="margin-right: 10px; width:200px"
                            [disabled]="this.GetDownloadStatus?.status=='pending' || this.GetDownloadStatus?.status=='verify'"
                            (click)="SendApproval_2(this.GetDownloadStatus?.status,this.Inward_Remittance_MT103[this.Inward_Remittance_MT103.length-1]?._id,code)">Send
                            for Approval</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div *ngIf='this.Lodgement[selection]["Lodgement"]["Hide"]==="no"'>
                    <div class="form-group">
                      <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-12">
                          <h3> Select Shipping Bill number*</h3>
                        </div>
                        <div class="space_div"></div>
                        <div class="col-lg-6 col-md-6 col-sm-12 col-12">
                          <div class="form-check-new">
                            <input #preantsearchShippingBillnumber popup-close="ShippingBill" autocomplete="off"
                              [value]="selectSB" class="form-control PopupOpen" type="text"
                              (click)="InputClick();ShippingBillnumber.style.display='flex'">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div *ngIf='this.Lodgement[selection]["BuyerRemitter"]["Show"]=== "yes"'>
                      <div class="form-group">
                        <div class="row">
                          <div class="col-md-12">
                            <h3>Select Tripartite agreement </h3>
                          </div>
                          <div class="col-lg-5 col-md-5 col-sm-10 col-10">
                            <div *ngIf="this.ThirdPartydata.length!=0">
                              <ng-select [items]="this.ThirdPartydata" bindLabel="buyerName"
                                placeholder="Select Tripartite agreement" [(ngModel)]="ThirdPartydataselection"
                                name="commodity" #ngSelect>
                              </ng-select>
                            </div>
                          </div>
                          <div class="col-lg-1 col-md-1 col-sm-2 col-2">
                            <button class="new_upbuttons"><label style="color: #5dc9e9;text-decoration: underline;"
                                [routerLink]="['/home/upload']">
                                <img src="../../../assets/Icon-feather-upload.svg" alt="">
                              </label></button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div *ngIf='this.Lodgement[selection]["BuyerRemitter"]["Hide"]=== "no" ||
                                                     this.Lodgement[selection]["BuyerRemitter"]["Show"]=== "yes" &&
                                                     this.Lodgement[selection]["Invoicereduction"]["Show"]=="yes" ||
                                                     this.Lodgement[selection]["Invoicereduction"]["Hide"]=="no"'>
                      <h3 class="select_bg_new">Select a bank <span class="color:red;">*</span></h3>
                      <div *ngFor='let value of bank' style="display: flex; align-items: center;">
                        <input style="flex-direction:row;" type="radio" id="options1" class="circular_input"
                          (ngModel)="myRadio" (click)="model.option = value" [checked]="value === model.option"
                          value="value.bank" (click)="setradio(value)" s>
                        <label style="flex-direction:row;" class="label1" for="male">{{value}}</label>
                      </div>
                      <br>
                      <button class="opt" style="float:right;" (click)='generateDoc1(code,j)'> Generate Document
                      </button>
                    </div>
                  </div>
                </div>
                <div [style.display]="code === c && importPurpose[j] == code?'block':'none'">
                  <div id="HTML_PDF_TABLE" #tablefulld_width class="bc"
                    [style.display]="doneImportPurpose[j] != code?'block':'none'">
                    <div id="first" class="bc">
                      <div class="bc new_table_lits_view">
                        <div class="tablefulld_width">
                          Our Ref No.: <span style="outline: none; display: inline-block;width: 150px;"
                            contenteditable="true"></span>
                          <br> Date: <span style="outline: none; display: inline-block;width: 150px;"
                            contenteditable="true"></span>
                          <br> Dear Sir/ Madam,
                          <br>
                          <br> <span style="border-bottom:2px solid black">
                            <b style="font-weight: 600;    padding: 0 0 15px 0; display: inline-block;">Subject:
                              Reduction
                              of Invoice Value
                              in other
                              Case</b> </span>
                          <p class="text_newp"> We hereby provide C.17 declaration of RBI Master Circular on Exports
                            of Goods and Services dated 01 July 2013 on reduction of invoice value in other cases. We
                            have negotiated/sent the bills for collection
                            and details of the bills are as below: </p>
                        </div>
                        <table style="width:100%;height: auto;">
                          <tr class="border1">
                            <td class="wtd4 border1"> Sr</td>
                            <td class="wtd4 border1"> Negotiated/Sent
                              <br> on Collection
                            </td>
                            <td class="wtd4 border1"> Bank’s
                              <br> Bill ID
                            </td>
                            <td class="wtd4 border1"> Buyer
                              <br> Name
                            </td>
                            <td class="wtd4 border1"> Invoice
                              <br> No.
                            </td>
                            <td class="wtd4 border1"> Bill
                              <br> Amount
                            </td>
                            <td class="wtd4 border1"> Outstanding
                              <br> Amount
                            </td>
                            <td class="wtd4 border1"> Reason
                              <br> for Reduction
                              <br> of Invoice
                            </td>
                          </tr>
                          <tr class="border1" *ngFor="let item of this.GENRATE_DOCMENTS_FILL;let i=index">
                            <td class="wtd3 border1"> <span
                                style="border:1px solid black;display: inline-block;width: 90px;"
                                contenteditable="true">{{(i+1)}}</span> </td>
                            <td class="wtd3 border1"> <span
                                style="border:1px solid black;display: inline-block;width: 90px;"
                                contenteditable="true">--</span> </td>
                            <td class="wtd3 border1"> <span
                                style="border:1px solid black;display: inline-block;width: 90px;"
                                contenteditable="true">{{item?.blcopyrefNumber}}</span> </td>
                            <td class="wtd3 border1"> <span
                                style="border:1px solid black;display: inline-block;width: 90px;"
                                contenteditable="true">{{item?.SbRef[0]?.buyerName}}</span> </td>
                            <td class="wtd3 border1"> <span
                                style="border:1px solid black;display: inline-block;width: 90px;"
                                contenteditable="true">{{item?.blcopyrefNumber}}</span> </td>
                            <td class="wtd3 border1"> <span
                                style="border:1px solid black;display: inline-block;width: 90px;"
                                contenteditable="true">{{item?.amount}}</span> </td>
                            <td class="wtd3 border1"> <span
                                style="border:1px solid black;display: inline-block;width: 90px;"
                                contenteditable="true">{{item?.blcopyrefNumber}}</span> </td>
                            <td class="wtd3 border1"> <span
                                style="border:1px solid black;display: inline-block;width: 90px;"
                                contenteditable="true">NA</span> </td>
                          </tr>
                        </table>
                        <br>
                        <p>2. We hereby provide the supporting documents for the reduction of invoice value as above.
                          <br>
                          <br> 3. We hereby abide and confirm to the Clause (i) of the above mentioned RBI Circular
                          and reads as:
                        </p>
                        <p>(i) after a bill has been negotiated or sent for collection, its amount is to be reduced
                          for any reason, AD Category - I banks may approve such reduction, if satisfied about
                          genuineness of the request,
                          provided: </p>
                        <p> a the reduction does not exceed 25 per cent of invoice value: </p>
                        <p>b.It does not relate to export of commodities subject to floor price stipulations
                          <br> c the exporter is not on the exporters caution list of the Reserve Bank, and
                        </p>
                        <p>d. the exporter is advised to surrender proportionate export incentives availed of, if any.
                          <br>
                          <br> 4. We request you to kindly knock-off the outstanding amount/s in your books and
                          provide
                        </p>
                        <p> a confirmation for the same.
                          <br>
                          <br> Thanking you,
                          <br> Yours&#39; Faithfully,
                          <br> Authorised Signatory
                          <br> Name:
                          <br> Designation:
                          <br> Company Seal:
                        </p>
                      </div>
                    </div>
                  </div>
                  <div *ngIf="doneImportPurpose[j] != code" style="
                                                      float: right;
                                                      display: block;">
                    <div class="button1" title="Share As PDF" (click)="exportAsPDF2(code,j)">Proceed to Preview
                    </div>

                  </div>
                  <div *ngIf="doneImportPurpose[j] == code">
                    <p>Setup: 3 Preview</p>
                    <div *ngIf="this.GetDownloadStatus?.status!='Approved'">
                      <div *ngIf="this.GetDownloadStatus?.status==null || this.GetDownloadStatus?.status=='Rejected'">
                        <button class="button1" style="margin-right: 10px; width:200px"
                          [disabled]="this.GetDownloadStatus?.status=='pending' || this.GetDownloadStatus?.status=='verify'"
                          (click)="SendApproval(this.GetDownloadStatus?.status,this.Inward_Remittance_MT103[this.Inward_Remittance_MT103.length-1]?._id,code)">Send
                          for Approval</button>
                      </div>
                    </div>
                    <br> Generated Document
                    <div>
                      <iframe class='iframe-controller' [src]="data9[j]" height="500px" width="400px"></iframe>
                    </div>
                    <br> Tri party document
                    <div style="display: flex; align-items: center;">
                      <iframe class='iframe-controller' style="flex-direction:row;" *ngFor="let pipo of mainDoc2[j]"
                        [src]="pipo" height="500px" width="400px"></iframe>
                    </div>
                    <br>
                    <br>
                    <button class="button1" style="margin-right: 10px;" (click)="edit()">Edit</button>
                    <button class="button1" style="margin-right: 10px;" *ngIf="isDone" (click)="doneDox()">Done</button>
                  </div>
                </div>
                <div *ngIf='code === c && sbPurpose[j] == code'>
                  <div>
                    <h1 *ngIf="doneSbPurpose[j] != code" style="font-size:22px; color:#222;">Annex 7</h1>
                    <div id="mainId" class="bc" *ngIf="doneSbPurpose[j] != code">
                      <div id="first" class="bc">
                        <div>
                          <p class="heading">Request Letter for Export Bill Processing </p>
                        </div>
                        <div style="margin-top: 20px; width:100%;" class="bc">
                          <div style=" text-align:right"> Date: <span style="
                                                      outline: none;
                                                              display: inline-block;
                                                              width: 150px;
                                                              border-bottom: 1px solid black;
                                                      " contenteditable="true"></span> </div>
                          <div style="width:100%; margin-top: -20px;"> To,
                            <br> The Manager
                            <br> YES Bank Ltd.,
                            <br> Branch address
                          </div>
                          <span style="
                                                      outline: none;
                                                                                                                              display: inline-block;
                                                                                                                              width: 150px;
                                                                                                                              border-bottom: 1px solid black;
                                                                                                                      "
                            contenteditable="true"></span>
                          <br>
                          <div style="margin-top: 10px;"> Dear Sir/Madam,
                            <br> Export Documents for □ Purchase □ Negotiation □ Discounting □ Collection □ Rupee
                            Advance
                            <br> Bill amount<span
                              style="
                                                                                                                              outline: none;
                                                                                                                              display: inline-block;
                                                                                                                              width: 150px;
                                                                                                                              border-bottom: 1px solid black;
                                                                                                                              "
                              contenteditable="true"></span>Tenor <span
                              style="
                                                                                                                                      outline: none;
                                                                                                                                              display: inline-block;
                                                                                                                                              width: 160px;
                                                                                                                                              border-bottom: 1px solid black;
                                                                                                                                      "
                              contenteditable="true"></span>
                          </div>
                          <br>
                          <table style="width:100%" id="padding_common">
                            <tr class="border1">
                              <td class="wtd4 border1"> Documents </td>
                              <td class="wtd4 border1"> Drafts </td>
                              <td class="wtd4 border1"> Invoice </td>
                              <td class="wtd4 border1"> Transport
                                <br> Doc.
                                <br> B/L/AWB/
                                <br> LR
                              </td>
                              <td class="wtd4 border1"> Pkg.
                                <br> List
                              </td>
                              <td class="wtd4 border1"> Insurance.
                                <br> policy
                              </td>
                              <td class="wtd4 border1"> Cert. Of
                                <br> Origin
                              </td>
                              <td class="wtd4 border1"> Test
                                <br> Cert
                              </td>
                              <td class="wtd4 border1"> Others </td>
                              <td class="wtd4 border1"> EDF</td>
                            </tr>
                            <tr class="border1">
                              <td class="wtd3 border1"> Original </td>
                              <td class="wtd3 border1"> <span
                                  style="
                                                                                                                                      outline: none;
                                                                                                                                      display: inline-block;
                                                                                                                                      width: 90px;
                                                                                                                                      "
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="wtd3 border1"> Duplicate </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td colspan="10" class="border1"> No. of documents to be sent to foreign bank / As per
                                export L/C </td>
                            </tr>
                            <tr class="border1">
                              <td class="wtd3 border1"> Original </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="wtd3 border1"> Duplicate </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                          </table>
                          <br>
                          <p> <b>Other documents
                              enclosed:</b>
                            <br> Original L/C No. <span
                              style="outline: none;display: inline-block;width: 100px; border-bottom: 1px solid black;"
                              contenteditable="true"></span> dated <span
                              style="outline: none;display: inline-block;width: 80px; border-bottom: 1px solid black;"
                              contenteditable="true"></span>of <span
                              style="outline: none;display: inline-block;width: 60px; border-bottom: 1px solid black;"
                              contenteditable="true"></span>along with all amendments (no. of
                            amendments ____) and advising letters duly stamped with revenue stamp on the reverse.
                            <br> amendments ____) and advising letters duly stamped with revenue stamp on the reverse.
                            EDF form Nos.<span
                              style="outline: none;display: inline-block;width: 300px; border-bottom: 1px solid black;"
                              contenteditable="true"></span>
                            <br> Date of Transport Doc. (AWB / BL / LR) <span
                              style="outline: none;display: inline-block;width: 200px; border-bottom: 1px solid black;"
                              contenteditable="true"></span> ** If the above mentioned
                            documents are being submitted after expiry of 21 days from date of shipment, than please
                            briefly describe the reason for delay in submission of
                            document_______________________________________________________________________________________________
                            __________________________________________________________________________________
                            <br> Debit account no. <span
                              style="outline: none;display: inline-block;width: 200px; border-bottom: 1px solid black;"
                              contenteditable="true"></span>with your branch <span
                              style="outline: none;display: inline-block;width: 100px; border-bottom: 1px solid black;"
                              contenteditable="true"></span>for all necessary charges and Interest.
                          </p>
                          <p> <b>Kindly note our
                              following
                              instructions:
                              (mark X wherever
                              applicable)</b> </p>
                          <table id="padding_common" style="width:100%;">
                            <tr class="border1">
                              <td class="sl border1"> 1</td>
                              <td class="sl2 border1"> Documents to be delivered against <b>PAYMENT
                                  /
                                  ACCEPTANCE
                                  **</b> </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="sl border1"> 2</td>
                              <td class="sl2 border1"> All banking charges outside India are for our / their (drawee)
                                A/C </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="sl border1"> 3</td>
                              <td class="wtd1 border1"> If unpaid / unaccepted, store and insure goods. </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="sl border1"> 4</td>
                              <td class="sl2 border1"> Debit all charges including charges in connection with item 4
                                to our Account no. <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span>with yourselves.
                              </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="sl border1"> 5</td>
                              <td class="sl2 border1"> Please forward the documents in one lot by courier / Regd. Air
                                mail** at our cost, risk and responsibility to (name & address of bank) </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="sl border1"> 6</td>
                              <td class="sl2 border1"> Other instructions if any: </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                          </table>
                          <p style="margin-top: 0px; margin-bottom: 0px;"> (** Please strike out whichever is not
                            applicable) </p>
                          <table id="padding_common" style="width:100%;">
                            <tr class="border1">
                              <td class="sl border1"> 7</td>
                              <td class="sl2 border1"> <b>Proceeds
                                  disposal
                                  instructions.
                                  (Mark
                                  X
                                  wherever
                                  applicable
                                  )</b> </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="sl border1"> </td>
                              <td class="sl2 border1"> Please credit proceeds (Amount) <span
                                  style="outline: none;display: inline-block;width: 90px; border-bottom: 1px solid black;"
                                  contenteditable="true"></span> <span
                                  style="outline: none;display: inline-block;width: 200px; border-bottom: 1px solid black;"
                                  contenteditable="true"></span>to packing credit account no. <span
                                  style="outline: none;display: inline-block;width: 90px; border-bottom: 1px solid black;"
                                  contenteditable="true"></span> With you and balance to operative account No. <span
                                  style="outline: none;display: inline-block;width: 200px; border-bottom: 1px solid black;"
                                  contenteditable="true"></span>with you. We
                                confirm that we have not availed packing credit from any other bank for the amount
                                transferred to our operative account with you. </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="sl border1"> </td>
                              <td class="wtd1 border1"> Please credit (Amount) <span
                                  style="outline: none;display: inline-block;width: 200px; border-bottom: 1px solid black;"
                                  contenteditable="true"></span>to EEFC A/C No. <span
                                  style="outline: none;display: inline-block;width: 200px; border-bottom: 1px solid black;"
                                  contenteditable="true"></span>With your Bank
                                <br> OR
                                <br> <span
                                  style="outline: none;display: inline-block;width: 400px; border-bottom: 1px solid black;"
                                  contenteditable="true"></span>
                                <br> ( Name of the bank and branch with complete details)
                              </td>
                              <td class="sl3"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="sl border1"> </td>
                              <td class="sl2 border1"> Please remit proceeds in INR by P.O. or remit through T.T. as
                                per instructions enclosed. </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="sl border1"> </td>
                              <td class="sl2 border1"> Please use the forward contract (s), as given below..... </td>
                              <td class="sl3 border1"> <span style="outline: none;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                          </table>
                          <table style="margin-top: 0px;" id="padding_common" style="width:100%;">
                            <tr class="border1">
                              <td class="wtd4 border1"> Forward Contract No.
                                <br> & Date
                              </td>
                              <td class="wtd4 border1"> Forward Contract Amount </td>
                              <td class="wtd4 border1"> Amount to be Utilized for this
                                <br> remittance
                              </td>
                              <td class="wtd4 border1"> Due Date of the Contract </td>
                            </tr>
                            <tr class="border1">
                              <td class="w1 border1"> <span style="outline: none;display: inline-block;width: 200px;"
                                  contenteditable="true"></span> </td>
                              <td class="w1 border1"> <span style="outline: none;display: inline-block;width: 200px;"
                                  contenteditable="true"></span> </td>
                              <td class="w1 border1"> <span style="outline: none;display: inline-block;width: 200px;"
                                  contenteditable="true"></span> </td>
                              <td class="w1 border1"> <span style="outline: none;display: inline-block;width: 200px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                            <tr class="border1">
                              <td class="w1 border1"> <span style="outline: none;display: inline-block;width: 200px;"
                                  contenteditable="true"></span> </td>
                              <td class="w1 border1"> <span style="outline: none;display: inline-block;width: 200px;"
                                  contenteditable="true"></span> </td>
                              <td class="w1 border1"> <span style="outline: none;display: inline-block;width: 200px;"
                                  contenteditable="true"></span> </td>
                              <td class="w1 border1"> <span style="outline: none;display: inline-block;width: 200px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                          </table>
                          <p> <b>Declaration – Cum –
                              Undertaking</b> </p>
                          <p> I/We hereby declare that the transaction the details of which are specifically mentioned
                            in this request letter does not involve, and is not designed for the purpose of any
                            contravention or evasion
                            of the provisions of the FEMA 1999 or of any rules, regulation, notification, direction or
                            order made there under. I /We also hereby agree and undertake to give such
                            information/documents as
                            will reasonably satisfy you about this transaction in terms of the above declaration. I/We
                            also understand that if I/We refuse to comply with any such requirement or make only
                            unsatisfactory
                            compliance therewith, the bank shall refuse in writing to undertake the transaction and
                            shall if it has reason to believe that any contravention/evasion is contemplated by me/us
                            report the matter
                            to Reserve Bank of India.. I/We further declare that the undersigned has/have the
                            authority to give this declaration and undertaking on behalf of the company.
                            <br>
                            <br> I/we also declare that the transaction does not have linkage with any Specially
                            Designated Nationals and Blocked Persons (SDN)/countries listed under OFAC in any manner.
                            If the transaction
                            involves linkage with any Specially Designated Nationals and Blocked Persons
                            (SDN)/countries listed under OFAC in any manner, I/we undertake not to hold YES Bank
                            Limited responsible for any of
                            its action or inaction in respect of the OFAC-linked transactions.
                            <br>
                            <br> <b>Note</b> – Default GST registration details as updated in the Bank records will be
                            considered for the said request. In case the no. to be considered is different, please
                            notify below.
                          </p>
                          <p style="margin-bottom: 0px;"> GSTIN Registration no. </p>
                          <div class="span_space"> <span
                              style="outline: none;display: inline-block;width: 20px; border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[0]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[1]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[2]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[3]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px; border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[4]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[5]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[6]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[7]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[8]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[9]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[10]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[11]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[12]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;"
                              contenteditable="true">{{arr[13]}}</span> <span
                              style="outline: none;display: inline-block;width: 20px;border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black; border-right: 1px solid black;"
                              contenteditable="true">{{arr[14]}}</span> </div>
                          <div style="margin-top: 20px;">
                            <p> Thanking You
                              <br> Warm Regards
                              <br> Authorized Signatory
                              <br> Company Stamp / Seal
                            </p>
                          </div>
                          <div>
                            <p> Date: <span
                                style="outline: none;display: inline-block;width: 100px; border-bottom: 1px solid black;"
                                contenteditable="true"></span>
                              <br> Place: <span
                                style="outline: none;display: inline-block;width: 100px; border-bottom: 1px solid black;"
                                contenteditable="true"></span>
                            </p>
                          </div>
                          <p> <b>Guidelines /checklist for
                              the exporter for
                              ensuring speedy
                              & error
                              free export bill
                              processing</b> </p>
                          <div>
                            <p> 1. Request letter to be signed by authorized signatory of the company.
                              <br> 2. Ensure that all columns are filled in the request letter.
                              <br> 3. Declaration cum undertaking is required under sec.10 (5), Chapter III of FEMA
                              1999), mentioned in the request letter.
                              <br> 4. EDF value to match with invoice amount. If differs, then reason to be stated.
                              <br> 5. If EDF submitted states another bank name then letter to be obtained from
                              concerned bank.
                              <br> 6. Please give clear disposal instructions of credit proceeds.
                              <br> 7. Prior approval from Relationship Officer is taken for direct dispatch of
                              documents or in case of existing overdue bills.
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <h1 *ngIf="sbPurpose1[j] == code && sbPurposeDone1[j] != code">
                      Invoice Reduction</h1>
                    <div id="mainId1" class="bc" *ngIf="sbPurpose1[j] == code && sbPurposeDone1[j] != code">
                      <div id="first" class="bc">
                        <div style=" margin-top: 20px; width: 75%;" class="bc">
                          <div style="width:80%;"> Our Ref No.: <span
                              style="outline: none; display: inline-block;width: 150px;" contenteditable="true"></span>
                            <br> Date: <span style="outline: none; display: inline-block;width: 150px;"
                              contenteditable="true"></span>
                            <br> Dear Sir/ Madam,
                            <br>
                            <br> <span style="border-bottom:2px solid black"><b style="font-weight: 600;">Subject:
                                Reduction
                                of
                                Invoice
                                Value in
                                other
                                Case</b>
                            </span>
                            <br> We hereby provide C.17 declaration of RBI Master Circular on Exports of Goods and
                            Services dated 01 July 2013 on reduction of invoice value in other cases. We have
                            negotiated/sent the bills
                            for collection and details of the bills are as below:
                            <br>
                          </div>
                          <table>
                            <tr class="border1">
                              <td class="wtd4 border1"> Sr</td>
                              <td class="wtd4 border1"> Negotiated/Sent
                                <br> on Collection
                              </td>
                              <td class="wtd4 border1"> Bank’s
                                <br> Bill ID
                              </td>
                              <td class="wtd4 border1"> Buyer
                                <br> Name
                              </td>
                              <td class="wtd4 border1"> Invoice
                                <br> No.
                              </td>
                              <td class="wtd4 border1"> Bill
                                <br> Amount
                              </td>
                              <td class="wtd4 border1"> Outstanding
                                <br> Amount
                              </td>
                              <td class="wtd4 border1"> Reason
                                <br> for Reduction
                                <br> of Invoice
                              </td>
                            </tr>
                            <tr class="border1">
                              <td class="wtd3 border1"> <span
                                  style="border:1px solid black;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span
                                  style="border:1px solid black;display: inline-block; width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span
                                  style="border:1px solid black;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span
                                  style="border:1px solid black;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span
                                  style="border:1px solid black;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span
                                  style="border:1px solid black;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span
                                  style="border:1px solid black;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                              <td class="wtd3 border1"> <span
                                  style="border:1px solid black;display: inline-block;width: 90px;"
                                  contenteditable="true"></span> </td>
                            </tr>
                          </table>
                          <br>
                          <p> 2. We hereby provide the supporting documents for the reduction of invoice value as
                            above.
                            <br>
                            <br> 3. We hereby abide and confirm to the Clause (i) of the above mentioned RBI Circular
                            and reads as:
                            <br>
                            <br> (i) after a bill has been negotiated or sent for collection, its amount is to be
                            reduced for any reason, AD Category - I banks may approve such reduction, if satisfied
                            about genuineness
                            of the request, provided:
                            <br> a the reduction does not exceed 25 per cent of invoice value:
                            <br> b.It does not relate to export of commodities subject to floor price stipulations
                            <br> c the exporter is not on the exporters caution list of the Reserve Bank, and
                            <br> d. the exporter is advised to surrender proportionate export incentives availed of,
                            if any.
                            <br>
                            <br> 4. We request you to kindly knock-off the outstanding amount/s in your books and
                            provide a confirmation for the same.
                            <br>
                            <br> Thanking you,
                            <br> Yours&#39; Faithfully,
                            <br> Authorised Signatory
                            <br> Name:
                            <br> Designation:
                            <br> Company Seal:
                          </p>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="doneSbPurpose[j] != code" style="
                                                              float: left;
                                                              display: block;
                                                              width:100%;
                                                              margin-top: 16px;
                                                              ">
                      <div class="button1" title="Share As PDF" (click)="exportAsPDF1(code,j)">Proceed to Preview
                      </div>
                    </div>
                    <div *ngIf="doneSbPurpose[j] == code">
                      <p>Setup: 3 Preview</p>
                      <button class="button1" style="margin-right: 10px;" (click)="downloadPDF()">Download</button>
                      <button class="button1" style="margin-bottom: 40px;">Send it via Email</button>
                      <br> Generated Document
                      <div>
                        <iframe class='iframe-controller' [src]="data8[j]" height="500px" width="400px"></iframe>
                        <iframe class='iframe-controller' *ngIf="sbPurposeDone1[j] == code" [src]="dataImport[j]"
                          height="500px" width="400px"></iframe>
                      </div>
                      <br> SB Documents
                      <div style="display: flex; align-items: center;">
                        <iframe class='iframe-controller' style="flex-direction:row;" *ngFor="let pipo of mainDoc1[j]"
                          [src]="pipo" height="500px" width="400px"></iframe>
                      </div>
                      <br>
                      <br> <span *ngIf='mainDoc3[j]'>Tri Party
                        Documents</span>
                      <div *ngIf='mainDoc3[j]' style="display: flex; align-items: center;">
                        <iframe class='iframe-controller' style="flex-direction:row;" *ngFor="let pipo of mainDoc3[j]"
                          [src]="pipo" height="500px" width="400px"></iframe>
                      </div>
                      <br>
                      <br>
                      <button class="button1" style="margin-right: 10px;" (click)="edit()">Edit</button>
                      <button class="button1" style="margin-right: 10px;" (click)="doneDox()"
                        *ngIf="isDone">Done</button>
                    </div>
                  </div>
                </div>
                <div *ngIf='code === c && noImportPurpose[j] == code && mailArray[j] != code'> <span>Tri Party
                    agreement</span>
                  <br>
                  <div style="display: flex; align-items: center;">
                    <iframe class='iframe-controller' style="flex-direction:row;" *ngFor="let pipo of mainDoc2[j]"
                      [src]="pipo" height="500px" width="400px"></iframe>
                  </div>
                  <br>
                  <br>
                  <Button class="button1" style="margin-bottom: 40px;" (click)="sendMail(j,code)">Send Mail</Button>
                </div>
                <div *ngIf='code === c && mailArray[j] == code'>
                  <span>
                    <div class="row">
                      <div class="col-md-4 col-sm-8 col-8">
                        <h3> Mail Sent SuccessFully</h3>
                      </div>
                      <div class="col-md-2 col-sm-4 col-4">
                        <a class="button1" style="margin-bottom: 40px;" (click)="doneDox()" *ngIf="isDone"> Done</a>
                      </div>
                    </div>
                  </span>
                  <br>
                </div>
              </div>
            </div>
            <div *ngIf='c != "P0102" && c != "P0104" && c != "P0105" && c != "P0107"'>
              <div *ngFor="let code of selectedPurpose; let j = index">
                <div *ngIf='code === c && generatePurpose[j] != code || Select_A_bank[code]'>
                  <input style="width: 50%; margin-top: 10px;margin-bottom: 10px;"
                    placeholder="Search for Buyer name or PI/PO Number to select PI/PO" class="form-control PopupOpen"
                    type="text" searchPIPONumbers id="SearchShippingBill" autocomplete="off"
                    [value]='StringConverter(selectPIPO)' popup-close="PIPONumbers"
                    (click)="loadPopupPIPONumbers(searchPIPONumbers,PIPONumbers)" #SearchPIPONumbers>
                  <span *ngIf='filterToggle'>Select PI/PO numbers*</span>
                  <br>
                  <h3 class="select_bg_new">Select a bank <span style="color:red;">*</span></h3>
                  <div *ngFor='let value of bank' style="display: flex; align-items: center;">
                    <input style="flex-direction:row;" type="radio" id="options1" class="circular_input"
                      [name]="value.bank" value="value.bank" (click)="setradio(value,SearchPIPONumbers.value,$event);">
                    <label style="flex-direction:row;" class="label1" for="male">{{value}}</label>
                  </div>
                  <br>
                  <div *ngIf='bankToggle'> <span>Credit A/C No.*</span>
                    <div *ngFor='let value of newBankArray' style="display: flex; align-items: center; ">
                      <input style="flex-direction:row;" type="radio" id="options1" class="circular_input"
                        value="value.bank" name="BankToCredit" (click)="creditTo(value)">
                      <label style="flex-direction:row;" class="label1"
                        for="male">{{value.bank}}-{{value.accType?.split("-")[0]}}-{{value?.currency}}-{{value.accNumber}}</label>
                    </div>
                    <br><span>Charges A/C No.*</span>
                    <div *ngFor='let value of newBankArray' style="display: flex; align-items: center; ">
                      <input *ngIf="value?.currency=='INR'" style="flex-direction:row;" type="radio" id="options1"
                        class="circular_input" value="value.bank" name="BankToCharge" (click)="chargesTo(value)">
                      <label *ngIf="value?.currency=='INR'" style="flex-direction:row;" class="label1"
                        for="male">{{value.bank}}-{{value.accType?.split("-")[0]}}-{{value?.currency}}-{{value.accNumber}}</label>
                    </div>
                    <br>
                  </div>
                  <div class="btn-control-panel" [ngClass]="{'btn-control-panel-2':this.charge?.length==0}">
                    <button class="btn btn-primary" style="float:right" (click)='generateDoc(code,j)'
                      [disabled]="this.charge?.length!=0?false:true"> Preview
                    </button>
                  </div>
                </div>
                <div *ngIf='code === c && generatePurpose[j] == code'>
                  <div>
                    <div id="mainId" class="bc"
                      *ngIf="donePurpose[j] != code && this.PREVIWES_URL!='' && this.PREVIWES_URL!=undefined">
                      <app-pdf-viewer [downloadShow]="this.GetDownloadStatus?.status=='Approved'?true : false"
                        name="Disposal Instruction" [src]="this.PREVIWES_URL" width="700px"
                        height="500px"></app-pdf-viewer>
                    </div>
                    <br>
                    <div *ngIf='newDone'>
                      <br>
                      <div style="display: flex; align-items: center;" *ngIf="this.MT103_URL!=''">
                        <app-pdf-viewer [downloadShow]="this.GetDownloadStatus?.status=='Approved'?true : false"
                          name="SWIFT Copy" [src]="this.MT103_URL" width="700px" height="500px"></app-pdf-viewer>
                      </div>
                      <br>
                    </div>
                    <div style="display: flex;flex-direction: column;gap: 20px;">
                      <div class="docStyle" style="width: 500px;"
                        *ngFor="let pipo of this.ARRAY_BUFFER_PDF;let i=index">
                        <app-pdf-viewer [downloadShow]="this.GetDownloadStatus?.status=='Approved'?true : false"
                          [name]="'PIPO-'+(i+1)" [src]="pipo" width="700px" height="500px"></app-pdf-viewer>
                      </div>
                    </div>
                    <div *ngIf="donePurpose[j] != code" class="btn-control-panel">
                      <div style="display: flex;">
                        <div
                          *ngIf="this.GetDownloadStatus?.status=='Approved' && this.USER_DATA?.RoleCheckbox!='' && this.USER_DATA?.RoleCheckbox!=null">
                          <button type="submit" class="btn btn-primary" (click)="mergeAllPDFs('download')"
                            (click)="modal.dismiss('Cross click')">Download PDF</button>
                          <button type="submit" class="btn btn-primary" (click)="mergeAllPDFs('sendMail')"
                            (click)="modal.dismiss('Cross click')">Send Mail</button>
                        </div>
                        <div *ngIf="this.GetDownloadStatus?.status!='Approved'">
                          <div
                            *ngIf="this.GetDownloadStatus?.status==null || this.GetDownloadStatus?.status=='Rejected'">
                            <button *ngIf='newDone' class="btn btn-primary" style="margin-right: 10px; width:200px"
                              [disabled]="this.GetDownloadStatus?.status=='pending' || this.GetDownloadStatus?.status=='verify'"
                              (click)="SendApproval(this.GetDownloadStatus?.status,this.Inward_Remittance_MT103[this.Inward_Remittance_MT103.length-1]?._id,this.selectedPdfs)">Send
                              for Approval</button>
                          </div>
                          <div
                            *ngIf="this.GetDownloadStatus?.status=='pending' || this.GetDownloadStatus?.status=='Verify'">
                            <button *ngIf='newDone' class="btn btn-primary" style="margin-right: 10px; width:200px"
                              [disabled]="this.GetDownloadStatus?.status=='pending' || this.GetDownloadStatus?.status=='verify'">Wait
                              for Approval</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="container popup" style="display: none;" #containerpopup>
                  <app-custom-model height="98vh" id="ExportTransactionView" name="Select Document To Download">
                    <div class="row">
                      <div class="col-12">
                        <div class="docStyle">
                          <p class="display-4" style="margin-top: 10px;width: 6 0px;
                                              border-bottom: 4px solid #49A2D7;">Generated Document</p>
                        </div>
                        <div *ngIf='newDone'>
                          <div class="docStyle" *ngFor="let pipo of this.ARRAY_BUFFER_PDF2;let i=index">
                            <input type="checkBox" checked (change)="addPdfToSelectedPdf(pipo , $event)">
                            <app-pdf-viewer [downloadShow]="this.GetDownloadStatus?.status=='Approved'?true : false"
                              [name]="'PIPO  Document '+(i+1)" [src]="pipo" width="100%"
                              height="500px"></app-pdf-viewer>
                          </div>
                        </div>
                      </div>
                    </div>
                    <custom-model-header>
                      <div style="display: flex;">
                        <div
                          *ngIf="this.GetDownloadStatus?.status=='Approved' && this.USER_DATA?.RoleCheckbox!='' && this.USER_DATA?.RoleCheckbox!=null">
                          <button type="submit" class="btn btn-primary" (click)="mergeAllPDFs('download')"
                            (click)="modal.dismiss('Cross click')">Download PDF</button>
                          <button type="submit" class="btn btn-primary" (click)="mergeAllPDFs('sendMail')"
                            (click)="modal.dismiss('Cross click')">Send Mail</button>
                        </div>
                        <div *ngIf="this.GetDownloadStatus?.status!='Approved'">
                          <div
                            *ngIf="this.GetDownloadStatus?.status==null || this.GetDownloadStatus?.status=='Rejected'">
                            <button *ngIf='newDone' class="btn btn-primary" style="margin-right: 10px; width:200px"
                              [disabled]="this.GetDownloadStatus?.status=='pending' || this.GetDownloadStatus?.status=='verify'"
                              (click)="SendApproval(this.GetDownloadStatus?.status,this.Inward_Remittance_MT103[this.Inward_Remittance_MT103.length-1]?._id,this.selectedPdfs)">Send
                              for Approval</button>
                          </div>
                          <div
                            *ngIf="this.GetDownloadStatus?.status=='pending' || this.GetDownloadStatus?.status=='Verify'">
                            <button *ngIf='newDone' class="btn btn-primary" style="margin-right: 10px; width:200px"
                              [disabled]="this.GetDownloadStatus?.status=='pending' || this.GetDownloadStatus?.status=='verify'">Wait
                              for Approval</button>
                          </div>
                        </div>
                      </div>
                    </custom-model-header>
                  </app-custom-model>
                </div>
              </div>
            </div>
          </div>
        </div>
        <ng-template #content let-modal>
          <div class="modal-body">
            <div class="container-fluid">
              <div class="row no-gutter" style="margin-right: -3px !important;">
                <button type="button" class="button2 topright" aria-label="Close"
                  (click)="modal.dismiss('Cross click')"> <span aria-hidden="true">OK</span> </button>
                <div class="col-md-7 ">
                  <div class="login d-flex py-5" style="padding: 0px !important;">
                    <div class="container">
                      <div class="row">
                        <div class="col-lg-10 col-xl-7 mrg">
                          <h6 class="display-5">Select PI/PO</h6>
                          <div class="d-flex justify-content-between mb-1">
                            <select [(ngModel)]="nameSearch"
                              style="border: 1px solid #C6CBD4;color: black;padding: 0px 2px;font-weight: 100;margin-right: 5px;font-size: 11px;height: 25px;">
                              <option value="">commodity</option>
                              <option *ngFor="let item of commoditydata; let i = index;" style="color: black;">
                                {{item.como}}</option>
                            </select>
                            <select [(ngModel)]="nameSearch1"
                              style="border: 1px solid #C6CBD4;color: black;padding: 0px 2px;font-weight: 100;margin-right: 5px;font-size: 11px;height: 25px;">
                              <option value="">location</option>
                              <option *ngFor="let item of locationdata; let i = index;" style="color: black;">
                                {{item.loc}}</option>
                            </select>
                            <select [(ngModel)]="nameSearch2"
                              style="border: 1px solid #C6CBD4;color: black;padding: 0px 2px;font-weight: 100;margin-right: 5px;font-size: 11px;height: 25px;">
                              <option value="">BuyerName</option>
                              <option *ngFor="let item of buyerDetail ; let i = index;" style="color: black;">
                                {{item.buyerName}}</option>
                            </select>
                            <input type="date" placeholder="Start Date"
                              style="border: 1px solid #C6CBD4;color: black;padding: 0px 2px;font-weight: 100;margin-right: 5px;font-size: 11px;height: 25px;"
                              [(ngModel)]="startDate" required />
                            <input type="date" placeholder="End Date"
                              style="border: 1px solid #C6CBD4;color: black;padding: 0px 2px;font-weight: 100;margin-right: 5px;font-size: 11px;height: 25px;"
                              [(ngModel)]="endDate" required />
                            <button class="filter"
                              (click)="startDate = '' ; endDate = '' ;nameSearch = '';nameSearch1 = '';nameSearch2 = '' ">Reset</button>
                          </div>
                          <section style="width: 157%; " class="box-shadow">
                            <table style="margin-left: -2.7rem; width: 250% !important"
                              class="table table-striped mb-0">
                              <thead style="width: 100% ;height: 54px;">
                                <tr class="text-muted table-heading"
                                  style="opacity: 50%; font-size: 10px; color:black !important; font-weight: 300 !important; padding: 0px; border-bottom: 1px solid #f2f4f8;">
                                  <th scope="col"></th>
                                  <th scope="col">DATE</th>
                                  <th scope="col">INVOICE NUMBER</th>
                                  <th scope="col">Amount</th>
                                  <th scope="col">CONSIGNEE NAME</th>
                                  <th scope="col">COMMODITY</th>
                                  <th scope="col">LOCATION</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="table-row1"
                                  *ngFor='let data of item3 | filterb:startDate:endDate | filtera:[{commodity:nameSearch},{location:nameSearch1},{buyerName:nameSearch2}]  let i = index'>
                                  <td>
                                    <input type="checkbox" />
                                  </td>
                                  <td> {{data.date}} </td>
                                  <td> {{data.pi_poNo}} </td>
                                  <td> {{data.amount}} </td>
                                  <td> {{data.buyerName}} </td>
                                  <td> {{data.commodity}} </td>
                                  <td> {{data.location}} </td>
                                </tr>
                              </tbody>
                            </table>
                          </section>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </main>
    </div>
  </div>
</div>

<app-custom-model [FooterButton]="true" EventButton="false"
  [customstyle]="{'margin':'90px auto auto !important','max-width': '55vw !important','margin-right': '0px !important'}"
  class="p-2" id="InwardRemittanceDisposal" [modalbodystyle]="{'height': '500px'}"
  (footerbutton)="ShowExportPage($event)" [condition]="this.REMITTANCE_DATA!=''?true:false"
  [buttondisabled]="this.REMITTANCE_DATA==''?true:false" name="Inward Remittance Disposal Selection Panel">
  <div class="col-12 pt-3">
    <table class="table mb-0 mt-2">
      <thead>
        <tr class="table-tr">
          <th scope="col" class="col-td-th-1">#</th>
          <th scope="col" class="col-td-th-3">Bank Name</th>
          <th scope="col" class="col-td-th-3">Ref. Number</th>
          <th scope="col" class="col-td-th-3">Currency</th>
          <th scope="col" class="col-td-th-3">Amount</th>
          <th scope="col" class="col-td-th-3">Remitter Name</th>
          <th scope="col" class="col-td-th-3">BL. Number</th>
          <th scope="col" class="col-td-th-3">Disposal Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr class="table-tr" *ngFor='let item of this.Inward_Remittance_MT103_DATA; let i = index'>
          <td class="col-td-th-1"><input type="checkbox" [checked]="item?.Checked" (change)="Remittancedata(item,i)" />
          </td>
          <td class="col-td-th-3">{{item?.BankName}}</td>
          <td class="col-td-th-3">{{item?.Inward_reference_number}}</td>
          <td class="col-td-th-3">{{item?.currency}}</td>
          <td class="col-td-th-3">{{item?.amount}}</td>
          <td class="col-td-th-3">{{item?.Remitter_Name}}</td>
          <td class="col-td-th-3">{{item?.Bill_lodgment_Number}}</td>
          <td class="col-td-th-3">{{item?.Inward_amount_for_disposal}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</app-custom-model>

<div class="other" #custommodal>
  <app-custom-model [FooterButton]="true" EventButton="false"
    [customstyle]="{'margin':'90px auto auto !important','max-width': '55vw !important','margin-right': '0px !important'}"
    class="p-2" id="BillLodgementNumber" [modalbodystyle]="{'height': '500px'}"
    name="Bill Lodgement Number Selection Panel">
    <div class="col-12 pt-3 BillLodgementNumber">
      <mat-accordion>
        <mat-expansion-panel [expanded]="data?.CheckBoxEnabled"
          *ngFor='let data of this.Export_Direct_Dispatch;let i = index'>
          <mat-expansion-panel-header>
            <mat-panel-description>
              <div class="d-flex flex-column" (click)="$event.stopPropagation();">
                <mat-panel-title>
                  Bill Lodgement DETAILS
                </mat-panel-title>
                <table class="table mb-0">
                  <tbody>
                    <tr class="table-tr">
                      <td class="col-td-th-1">
                        <input [checked]="data?.CheckBoxEnabled" type="checkbox"
                          (click)="data.CheckBoxEnabled=!data?.CheckBoxEnabled" ngModel (click)="ClickbankNumber(data?.blcopyrefNumber,'.bnk_reff','')"/>
                      </td>
                      <td scope="col" class="col-td-th-3">Party Name : {{data?.buyerName}}</td>
                      <td scope="col" class="col-td-th-3">Lodgement no. : {{data?.blcopyrefNumber}}</td>
                      <td scope="col" class="col-td-th-3">Amount {{data?.amount}}</td>
                      <td scope="col" class="col-td-th-3">AVAILABLE AMOUNT :
                        {{this.calculateAmount(data?.amount,data?.SbRef[0]?.fobValue)}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div class="d-flex flex-column">
            <table class="table mb-0">
              <thead>
                <tr class="table-tr">
                  <th scope="col" class="col-td-th-1">#</th>
                  <th scope="col" class="col-td-th-3">Party Name</th>
                  <th scope="col" class="col-td-th-3">SB NUMBER</th>
                  <th scope="col" class="col-td-th-3">Currency</th>
                  <th scope="col" class="col-td-th-3">SB AMOUNT</th>
                </tr>
              </thead>
              <tbody>
                <tr class="table-tr" *ngFor='let SbData of data?.SbRef;let j = index'>
                  <td class="col-td-th-1">
                    <input type="checkbox" (click)="SBAdd($event,SbData,i,j)" ngModel/>
                  </td>
                  <td class="col-td-th-3">{{SbData?.buyerName}}</td>
                  <td class="col-td-th-3">{{SbData?.sbno}}</td>
                  <td class="col-td-th-3">{{SbData?.fobCurrency}}</td>
                  <td class="col-td-th-3">{{SbData?.fobValue}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </app-custom-model>
</div>
<div class="custom-div" #ShippingBillnumber>
  <app-custom-model [FooterButton]="false" modalbodystyle="max-height:90vh" (ModelChange)="removeSession()"
    [customstyle]="{'max-width':'98vw !important'}" class="p-2" height="98vh" id="ShippingBill" name="Shipping Bill"
    #ShippingBill>
    <div class="DDDD p-3" *ngIf="this.documentService.MT102_SUBJECT!=''">
      <app-pdf-viewer [htmlload]="true" class="pt-3" [downloadShow]="false"
        src="home/Transaction/Export/new-direct-dispatch/ExportBillRegularization" width="100%"
        height="500px"></app-pdf-viewer>
    </div>
  </app-custom-model>
</div>
<app-custom-model [FooterButton]="false" modalbodystyle="max-height:90vh" (ModelChange)="removeSession()"
  [customstyle]="{'max-width':'98vw !important'}" class="p-2" height="98vh" id="PIPONumbers"
  name="Search PI/PO numbers*" #PIPONumbers>
  <custom-model-header>
    <div class="d-flex" style="gap: 10px;">
      <button class="filter1 btn btn-secondary" aria-label="Close" (click)="PIPONumbers?.displayHidden">Cancel</button>
      <button class="filter1 btn btn-primary" [disabled]="selectPIPO_data?.length!=0?false:true"
        style="margin-left:16px" (click)="AmountValidation(PIPONumbers)">Sumbit</button>
    </div>
  </custom-model-header>
  <div class="col-12 p-2">
    <div class="mt_bottom" style="margin-bottom:20px">
      <div class="row">
        <div class="d-flex col-12" style="align-items: baseline;">
          <select [(ngModel)]="PIPONumbersBuyerName" class="form-control col-4"
            (change)="PIPOFilter(PIPONumbersBuyerName)" disabled>
            <option value="BuyerName">BuyerName</option>
            <option [value]="item?.value" *ngFor="let item of buyerName ; let i = index;" style="color: black;">
              {{item?.value}}</option>
          </select>
          <div class="inerward-remittance-details">
            <p>Remittance-Details || Currency : {{this.Inward_Remittance_MT103_DATA[0]?.currency}} | Remittance Amount :
              {{this.Inward_Remittance_MT103_DATA[0]?.Inward_amount_for_disposal}} </p>
            <p>PI/PO Deatils || Currency : {{this.Inward_Remittance_MT103_DATA[0]?.currency}} | PI/PO Amount :
              {{this.PIPO_SUM_AMOUNT}} </p>
          </div>
        </div>
      </div>
    </div>
    <section class="box-shadow" style="height: 56vh;
  overflow: auto;">
      <table class="table mb-0 mt-2">
        <thead>
          <tr class="table-tr pr-3">
            <th scope="col" class="col-td-th-1">#</th>
            <th scope="col" class="col-td-th-3">Invoice No</th>
            <th scope="col" class="col-td-th-3">Invoice Date</th>
            <th scope="col" class="col-td-th-3">Buyer Name</th>
            <th scope="col" class="col-td-th-3">Branch</th>
            <th scope="col" class="col-td-th-3">Currency</th>
            <th scope="col" class="col-td-th-3">Invoice Amount</th>
            <th scope="col" class="col-td-th-3">Balance Amount</th>
            <th scope="col" class="col-td-th-3">Utilized Amount</th>
          </tr>
        </thead>
        <tbody *ngIf="dataSource.length!=0">
          <tr class="table-tr pr-3" *ngFor='let data of dataSource; let i = index'>
            <td scope="col" class="col-td-th-1">
              <input type="checkbox" (change)="changeCheckboxPIPO($event,data['pi_poNo'],data,i);" />
            </td>
            <td scope="col" class="col-td-th-3"> {{data?.pi_poNo}} </td>
            <td scope="col" class="col-td-th-3"> {{data?.date}} </td>
            <td scope="col" class="col-td-th-3"> {{data?.buyerName}} </td>
            <td scope="col" class="col-td-th-3"> {{data?.location}} </td>
            <td scope="col" class="col-td-th-3"> {{data?.currency}} </td>
            <td scope="col" class="col-td-th-3"> {{data?.amount}} </td>
            <td scope="col" class="col-td-th-3"> {{data?.AvailableAmount}} </td>
            <td scope="col" class="col-td-th-3"><input type="text" (keypress)="InputValidation($event,data)"
                [(ngModel)]="data.UtilizedAmount"></td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>
</app-custom-model>

<app-custom-model [customstyle]="{'max-width':'690vw !important'}" class="p-2" height="75vh" id="FORWARD_CONTRACT"
  [minimizedisabled]="false" modalbodyheight="70vh" name="Select FORWARD CONTRACT View" #FORWARD_CONTRACTPANEL>
  <div class="col-12 mt-2 mb-2">
    <table class="table">
      <thead>
        <tr class="table-tr pr-3">
          <th scope="col" class="col-td-th-1">#</th>
          <th scope="col" class="col-td-th-2">Forward Ref No</th>
          <th scope="col" class="col-td-th-3">Booking Date</th>
          <th scope="col" class="col-td-th-2">Forward Contract Amount</th>
          <th scope="col" class="col-td-th-3">Due Date</th>
          <th scope="col" class="col-td-th-3">Amount to be utilised</th>
          <th scope="col" class="col-td-th-3">Exchange rate as per FWC</th>
        </tr>
      </thead>
      <tbody>
        <tr class="table-tr mt-2 pr-3" *ngFor="let item of this.ForwardContractDATA;let i=index">
          <td scope="col" class="col-td-th-1"><input type="checkbox" (change)="ToForwardContract($event,item,i)"></td>
          <td scope="col" class="col-td-th-2">{{item?.ForwardRefNo}}</td>
          <td scope="col" class="col-td-th-3">{{item?.BookingDate}}</td>
          <td scope="col" class="col-td-th-2">{{item?.BookingAmount}}</td>
          <td scope="col" class="col-td-th-3">{{item?.ToDate}}</td>
          <td scope="col" class="col-td-th-3">{{item?.AvailableAmount}}</td>
          <td scope="col" class="col-td-th-3">{{item?.NetRate}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="modal-footer" style="position: fixed;bottom: -30px;right: 20px;">
    <div style="display:flex;" class="mt-3">
      <button type="button" class="btn btn-primary"
        (click)="DoneButton();FORWARD_CONTRACTPANEL?.displayHidden">Done</button>
    </div>
  </div>
</app-custom-model>