"use strict";(self.webpackChunkdm_frontend=self.webpackChunkdm_frontend||[]).push([[975],{1975:(F,m,c)=>{c.r(m),c.d(m,{ImportsInsuranceModule:()=>q});var g=c(276),x=c(2579),d=c(2953),b=c(388),_=c(241),h=c(9408),u=c(574),t=c(4650),I=c(6852),C=c(1481),v=c(7185),y=c(4981),f=c(6895),p=c(4006);const Z=["insurance"];function w(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.insuranceNumber," ")}}function T(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"input",31),t.NdJ("ngModelChange",function(i){t.CHM(n);const s=t.oxw().$implicit;return t.KtG(s.insuranceNumber=i)}),t.qZA()()}if(2&o){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",n.insuranceNumber)}}function M(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.insuranceAmount," ")}}function A(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"input",32),t.NdJ("ngModelChange",function(i){t.CHM(n);const s=t.oxw().$implicit;return t.KtG(s.insuranceAmount=i)}),t.qZA()()}if(2&o){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",n.insuranceAmount)}}function N(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.currency," ")}}function O(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"input",33),t.NdJ("ngModelChange",function(i){t.CHM(n);const s=t.oxw().$implicit;return t.KtG(s.currency=i)}),t.qZA()()}if(2&o){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",n.currency)}}function P(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(),s=i.$implicit,a=i.index,l=t.oxw();return t.KtG(l.toSave(s,a))}),t._uU(1,"Save"),t.qZA()}}function k(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().index,s=t.oxw();return t.KtG(s.toEdit(i))}),t._uU(1,"Edit"),t.qZA()}}function U(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"tbody",24)(1,"tr",25)(2,"td",26),t._uU(3),t.qZA(),t.TgZ(4,"td",27),t._uU(5),t.qZA(),t.TgZ(6,"td"),t.YNc(7,w,2,1,"div",28),t.YNc(8,T,2,1,"div",28),t.qZA(),t.TgZ(9,"td"),t.YNc(10,M,2,1,"div",28),t.YNc(11,A,2,1,"div",28),t.qZA(),t.TgZ(12,"td"),t.YNc(13,N,2,1,"div",28),t.YNc(14,O,2,1,"div",28),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td",29),t.NdJ("click",function(){const s=t.CHM(n).$implicit,a=t.oxw(),l=t.MAs(48);return a.openInsuranceDoc(l),t.KtG(a.viewID(s))}),t._uU(18," view "),t.qZA(),t.TgZ(19,"td"),t.YNc(20,P,2,0,"button",30),t.YNc(21,k,2,0,"button",30),t.qZA()()()}if(2&o){const n=r.$implicit,e=r.index,i=t.oxw();t.xp6(3),t.Oqu(n.date),t.xp6(2),t.hij(" ",i.getPipoNumbers(n)," "),t.xp6(2),t.Q6J("ngIf",!i.optionsVisibility[e]),t.xp6(1),t.Q6J("ngIf",i.optionsVisibility[e]),t.xp6(2),t.Q6J("ngIf",!i.optionsVisibility[e]),t.xp6(1),t.Q6J("ngIf",i.optionsVisibility[e]),t.xp6(2),t.Q6J("ngIf",!i.optionsVisibility[e]),t.xp6(1),t.Q6J("ngIf",i.optionsVisibility[e]),t.xp6(2),t.Oqu(n.buyerName),t.xp6(4),t.Q6J("ngIf",i.optionsVisibility[e]),t.xp6(1),t.Q6J("ngIf",!i.optionsVisibility[e])}}function D(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"div",39)(5,"div",40)(6,"div",41)(7,"h6",42),t._uU(8,"Insurance Document"),t.qZA(),t._UZ(9,"iframe",43),t.TgZ(10,"button",44),t.NdJ("click",function(){const s=t.CHM(n).$implicit;return t.KtG(s.dismiss("Cross click"))}),t._uU(11,"OK "),t.qZA()()()()()()()()}if(2&o){const n=t.oxw();t.xp6(9),t.Q6J("src",n.viewData,t.uOi)}}let J=(()=>{class o{constructor(n,e,i,s,a,l,E){this.documentService=n,this.sanitizer=e,this.modalService=i,this.toastr=s,this.userService=a,this.router=l,this.sharedData=E,this.item=[],this.item1=[],this.optionsVisibility=[]}ngOnInit(){this.documentService.getInsurance().subscribe(n=>{console.log("Data fetched successfully",n),this.item=n.data;for(let e of this.item)"import"==e.file&&this.item1.push(e)},n=>console.log(n))}exportToExcel(){const n=u.P6.table_to_sheet(this.insurance.nativeElement),e=u.P6.book_new();u.P6.book_append_sheet(e,n,"Sheet1"),u.NC(e,"insurance.xlsx")}newInsurance(){console.log("upload"),this.sharedData.changeretunurl("home/importInsurance"),this.router.navigate(["home/upload",{file:"import",document:"insuranceCopy"}])}getDismissReason(n){return n===d.If.ESC?"by pressing ESC":n===d.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${n}`}openInsuranceDoc(n){this.modalService.open(n,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeResult=`Closed with: ${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`})}getPipoNumbers(n){return n.pipo.map(e=>e.pi_poNo)}viewID(n){this.viewData=this.sanitizer.bypassSecurityTrustResourceUrl(n.doc)}toSave(n,e){this.optionsVisibility[e]=!1,console.log(n),this.documentService.updateInsurance(n,n._id).subscribe(i=>{console.log("king123"),this.toastr.success("Insurance Document Row Is Updated Successfully."),console.log(i)},i=>{console.log("error")})}toEdit(n){this.optionsVisibility[n]=!0,this.toastr.warning("Insurance Document Row Is In Edit Mode")}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(I.Z),t.Y36(C.H7),t.Y36(d.FF),t.Y36(v._W),t.Y36(y.K),t.Y36(g.F0),t.Y36(_.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-import-insurance"]],viewQuery:function(n,e){if(1&n&&t.Gf(Z,5),2&n){let i;t.iGM(i=t.CRH())&&(e.insurance=i.first)}},decls:49,vars:1,consts:[[1,"content-wrap"],["id","content","role","main",1,"content"],[2,"display","flex","flex-direction","rows","justify-content","space-between","align-items","center"],[2,"display","flex","align-items","center"],[1,"heading"],["name","subject","id","subject",2,"border","1px solid #C6CBD4","color","black","padding","4px","font-weight","100","margin-right","5px","font-size","14px"],["value","","selected","selected"],["name","topic","id","topic",2,"border","1px solid #C6CBD4","color","black","padding","4px","font-weight","100","margin-right","5px","font-size","14px"],[2,"color","#ffffff !important","font-weight","100","font-family","Poppins ,sans-serif","padding","5px 8px","font-size","14px","background-color","#49A2D7","border","none","border-radius","5px",3,"click"],[1,"upload-button",3,"click"],[1,"analytics"],[1,"analytics-side",2,"width","100%"],["insurance",""],[1,"row",2,"width","100%"],["id","container",1,"col-12","mb-lg","padding"],[1,"pb-0","box-shadow",2,"width","150%"],[1,"widget-body","p-0","support","table-wrapper",2,"height","638px"],[1,"table","table-striped","mb-0"],[2,"width","100%","height","54px","background","white","position","sticky","top","0"],[1,"text-muted","table-heading",2,"opacity","45%","font-size","14px","color","black !important","font-weight","300 !important","padding","5px","border-bottom","1px solid #f2f4f8"],["scope","col"],[1,"pl-3"],["class","text-dark",4,"ngFor","ngForOf"],["content",""],[1,"text-dark"],[1,"table-row"],[2,"padding","20px 35px"],[1,"sb-no"],[4,"ngIf"],[3,"click"],["class","savBtn",3,"click",4,"ngIf"],["name","insuranceNumber","type","text","placeholder","Insurance Document Number",1,"tblInput","form-control",3,"ngModel","ngModelChange"],["name","insuranceAmount","type","text","placeholder","Insurance Amount",1,"tblInput","form-control",3,"ngModel","ngModelChange"],["name","currency","type","text","placeholder","Currency",1,"tblInput","form-control",3,"ngModel","ngModelChange"],[1,"savBtn",3,"click"],[1,"modal-body"],[1,"row","no-gutter"],[1,"col-md-7",2,"margin","10px"],[1,"login","d-flex","py-5",2,"padding","0px !important"],[1,"container","popup"],[1,"row"],[1,"col-lg-10","col-xl-7","mrg"],[1,"display-6"],["width","315%","height","500px",3,"src"],["type","submit",1,"submitBTN",2,"margin-left","250px",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5,"Import Insurance Documents"),t.qZA()(),t.TgZ(6,"div"),t._uU(7," Date: "),t.TgZ(8,"select",5)(9,"option",6),t._uU(10,"Today"),t.qZA()(),t._uU(11," Type: "),t.TgZ(12,"select",7)(13,"option",6),t._uU(14,"All"),t.qZA()()(),t.TgZ(15,"div")(16,"button",8),t.NdJ("click",function(){return e.exportToExcel()}),t._uU(17,"Export To Excel "),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return e.newInsurance()}),t._uU(19," Upload New "),t.qZA()()(),t.TgZ(20,"div",10)(21,"div",11,12)(23,"div",13)(24,"div",14)(25,"section",15)(26,"div",16)(27,"table",17)(28,"thead",18)(29,"tr",19)(30,"th",20)(31,"span",21),t._uU(32,"DATE"),t.qZA()(),t.TgZ(33,"th",20),t._uU(34,"PI/PO No."),t.qZA(),t.TgZ(35,"th",20),t._uU(36,"Insurance No."),t.qZA(),t.TgZ(37,"th",20),t._uU(38,"Insurance Amount"),t.qZA(),t.TgZ(39,"th",20),t._uU(40,"Currency"),t.qZA(),t.TgZ(41,"th",20),t._uU(42,"Buyer Name"),t.qZA(),t.TgZ(43,"th",20),t._uU(44,"Insurance Doc"),t.qZA(),t._UZ(45,"th",20),t.qZA()(),t.YNc(46,U,22,11,"tbody",22),t.qZA()()()()()()(),t.YNc(47,D,12,1,"ng-template",null,23,t.W1O),t.qZA()()),2&n&&(t.xp6(46),t.Q6J("ngForOf",e.item1))},dependencies:[f.sg,f.O5,p.YN,p.Kr,p.Fj,p.JJ,p.On],styles:["#container[_ngcontent-%COMP%]{overflow:scroll;overflow-x:auto}#container[_ngcontent-%COMP%]::-webkit-scrollbar{width:0px;height:0px}.table-padding[_ngcontent-%COMP%]{background:white!important}.table_top[_ngcontent-%COMP%]{display:grid;grid-template-columns:28.55% 33% 36%;border-bottom:.5px solid rgba(0,0,0,.2);align-items:center}.bcw[_ngcontent-%COMP%]{background-color:#fff;color:#323e4a!important}.heading[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:20px;font-weight:700;color:#323e4a}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none}.table-heading[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:500;color:#747474}.dropdown[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.upload-button[_ngcontent-%COMP%]{color:#fff!important;font-weight:100;font-family:Poppins,sans-serif;padding:5px 8px;font-size:14px;background-color:#49a2d7;border:none;border-radius:5px;margin-left:2px}.box-shadow[_ngcontent-%COMP%]{box-shadow:none!important}.rect[_ngcontent-%COMP%]{text-align:right;min-width:80px!important}.table-row[_ngcontent-%COMP%]{background-color:#fff!important;color:#707683}.table-row[_ngcontent-%COMP%]:hover{background:#f6f9ff!important;border-left:5px solid #49a2d7;cursor:pointer}.sb-no[_ngcontent-%COMP%]{color:#49a2d7}.display-6[_ngcontent-%COMP%]{text-align:center;font-weight:600;color:#606670;font-size:22px;margin-bottom:12px;margin-top:20px}.submitBTN[_ngcontent-%COMP%]{margin-top:10px;width:160px;height:40px;border:2px white solid;border-radius:20px;background-color:#51aee5;font-size:12px;color:#fff}.tblInput[_ngcontent-%COMP%]{border:1px solid #e3e6ee;border-radius:3px;width:140px}.savBtn[_ngcontent-%COMP%]{background-color:#49a2d7;color:#fff;border:1px solid rgba(0,0,0,.4);font-size:14px;cursor:pointer;border-radius:2px;width:60px}"]}),o})(),q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[x.D,d.FF,_.g],imports:[h.$,g.Bz.forChild([{path:"",component:J,pathMatch:"full"}]),b.zk.forRoot()]}),o})()}}]);